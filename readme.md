# 1. 핵심 Azure 개념

## 1. 클라우드 컴퓨팅

인터넷을 통한 컴퓨팅 서비스 제공

서버, 스토리지, 데이터베이스, 네트워킹, 소프트웨어, 분석 및 인텔리전스가 포함

신속한 혁신, 유연한 리소스, 규모의 경제성을 제공

다른 사람이 운영하는 데이터 센터에서 컴퓨팅 성능 및 스토리지를 임대하는 방법

클라우드 리소스를 자체 데이터 센터의 리소스 처럼 취급

## 2. 요금이 저렴한 이유

종량제 가격 책정 모델 사용(사용한 만큼 청구)

사용하는 클라우드 서비스에 대해서만 비용 지불

사용이 끝난 리소스는 반환

클라우드 공급자는 사용자 대신 기본 인프라를 유지 관리

어려운 비즈니스 문제를 신속하게 해결하고 사용자에게 최첨단 솔루션 제공

- 운영비용 절감
- 인프라의 효율적 실행
- 비즈니스 요구 사항 변화에 따른 크기 조정

## 3. 클라우드 전환 이유

끊임없이 변화하는 디지털 세계

- 빠른 속도로 사용자에게 새로운 기능을 제공
- 사용자는 자신의 디바이스 및 소프트웨어로 보다 다양하고 포괄적인 활용 기대

더욱 빠르게 서비스 제공하고 위하여 아래의 주문형 액세스 제공

- 거의 제한 없는 컴퓨팅, 스토리지 및 네트워킹 구성 요소 풀
- 애플리케이션을 차별화하는데 도움되는 음성 인식 및 기타 인식 서비스
- 소프트웨어 및 디바이스에서 원격 분석 데이터를 제공하는 분석 서비스

## 4. Azure 란

비즈니스 과제를 해결하도록 돕는 지속적으로 확장 중인 일련의 클라우드 서비스

## 5. Azure 기능

- 미래 대비 : 지속적인 혁신으로 미래의 제품 비전 실현
- 조건부 빌드 : 오픈 소스에 대한 노력과 모든 언어 및 프레임워크 지원을 통해 원하는 방식으로 빌드하고 배포
- 원활한 하이브리드 운영 : 온-프레미스, 클라우드, 에지 등 원하는 위치에서 운영
- 신뢰할 수 있는 클라우드 : 능동적 규정 준수와 보안 전문가 팀의 지원을 통해 보안성 확보

## 6. Azure로 무엇을 할 수 있나?

클라우드는 가상 머신을 실행하기 위한 다른 장소 이상의 의미를 가짐

AI, 기계학습 서비스, 동적으로 확장되는 스토리지 솔루션 등

## 7. Azure 작동 방식

Azure는 private and public cloud plantform으로 개발자와 it 관리자의 빌드, 배포, 애플리케이션 관리를 돕니다.

Azure는 Virtualization 기술을 사용 한다.

Virtualization은 Hypervisor라는 추상화 layer를 사용하여 컴퓨터 하드웨어와 OS의 결합을 분리 시킨다.

Hypervisor는 물리적 컴퓨터의 모든 부분들을 emulate 하고 이것이 가상 머신 cpu가 된다.

제한된 하드웨어의 활용을 최적화 한다.

이는 동시에 여러개의 Virtual Machine을 가동시키고 각각의 Virtual Machine은 Windows, Linux 같은 operating system을 구동 할 수 있다.

Azure는 Virtualization technology 가지고 있고 전 세계 도처의 Microsoft data center의 거대한 스케일을 이용한다.

각각의 데이터 센터는 서버로 가득채워진 많은 랙을 가지며 각각의 서버는 multiple virtual machine을 구동하기 위한 Hypervisor를 포함하고 있다.

network switch는 이러한 서버들에 대하여 연결성을 제공한다.

<img src="https://github.com/young-hwang/azure-900/blob/main/img/1.png" width="50%" />

각각의 랙에 있는 하나의 서버는 Fabric Controller라 불리는 특별한 소프트웨어를 실행한다.

<img src="https://github.com/young-hwang/azure-900/blob/main/img/2.png" width="50%" />

각 Fabric Contorller는 흔히 Orchestrator라고 알려진 또 다른 특별한 소프트웨어와 연결 된다.

<img src="https://github.com/young-hwang/azure-900/blob/main/img/3.png" width="50%" />

Orchestrator는 Azure에서 사용자 요청에 응답하는 것을 포함하여 일어나는 모든 일을 책임진다.

<img src="https://github.com/young-hwang/azure-900/blob/main/img/4.png" width="50%" />

사용자들은 Orchestrator의 web API를 사용하여 요청한다.

web API는 Azure Portal의 사용자 Inteface를 포함한 다양한 툴들로 부터 요청이 되어 질 수 있다.

사용자가 새로운 Virtual Machine을 생성하는 요청을 만들었을 때 Orchestrator packges의 모든 것 들이 필요해진다.

최상의 Server rack을 선택하고 package를 전송과 fabric controller에 요청을 한다.

Fabric Controllers가 virtual machine이 생성되어 졌을 때 사용자는 이것에 접근 할수 있다.

## 8. Azure Portal

Azure Portal은 명령줄 도구의 대안을 제공하는 웹 기반의 통합 콘솔이다.

- 간단한 웹앱에서 복잡한 클라우드 배포까지 모든 것을 구축, 관리 및 모니터링
- 리소스를 편하게 볼수 있는 사용자 지정 대시보드
- 내게 필요한 옵션을 구성하여 최적의 환경 설정

## 9. Azure Marketplace

Azure에서 실행되도록 최적화된 솔루션과 서비스를 제공하는 Microsoft 파트너, 독립 소프트웨어 공급업체, 스타트업을 사용자와 연결해 준다.
모든 솔루션 및 서비스는 Azure에서 실행되도록 인증된 것이다.

## 10. Azure 서비스 둘러보기

가장 일반적으로 사용되는 범주

- Compute
- 웹
- 네트워킹
- IoT(사물 인터넷)
- 스토리지
- 빅 데이터
- 모바일
- AI
- 데이터 베이스
- DevOps

### a. Compute

컴퓨팅 서비스는 회사가 Azure 플랫폼으로 이전하는 주된 이유이다. Azure에서는 애플리케이션 및 서비스를 호스팅하는 다양한 옵션을 제공한다.

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Virtual Machine|Azure에서 호스트된 Windows 또는 Linux VM(가상 머신)|
|Azure Virtual Machine Scale Sets|Azure에서 호스트된 Windows 또는 Linux VM의 스케일링|
|Azure Kubernetes Service|컨테이너화된 서비스를 실행하는 VM을 위한 클러스트 관리|
|Azure Service Fabric|Azure 또는 온-프레미스에서 실행되는 분산 시스템 플랫폼|
|Azure Batch|병렬 및 고성능 컴퓨팅 애플리케이션을 위한 관리 서비스|
|Azure Container Instance|서버 또는 VM을 ***프로비저닝***하지 않고 Azure에서 실행되는 컨테이너화된 앱|
|Azure Functions|이벤트 기반의 서버리스 컴퓨팅 서비스|

### b. 네트워킹

컴퓨팅 리소스를 연결하고 애플리케이션에 대한 액세스를 제공하는 것이 Azure 네트워킹의 주요 기능이다.

Azure의 네트워킹 기능에는 글로벌 Azure 데이터 센터의 서비스 및 기능을 외부 환경에 연결하는 다양한 옵션이 포함되어 있다.

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Virtual Network|수신 VPN(가상 사설망) 연결에 VM을 연결|
|Azure Load Balancer|애플리케이션 또는 서비스 엔드포인트에 대한 인바운드 및 아웃바운드 연결의 균형을 맞춤|
|Azure Application Gateway|애플리케이션 보안을 강화하는 동시에 앱 ***서버 팜*** 제공을 최적화|
|Azure VPN Gateway|고성능 VPN 게이트웨이를 통해 Azure 가상 네트워크에 액세스|
|Azure DNS|매우 빠른 DNS 응답과 매우 높은 도메인 가용성 제공|
|Azure Content Delivery Network|전 세계 고객에게 고대역폭 콘텐츠 제공|
|Azure DDoS Protection|Azure에서 호스트되는 애플리케이션을 DDoS 공격으로 보호|
|Azure Traffic Manager|전 세계 Azure 지역에 네트워크 트래픽 분산|
|Azure ExpressRoute|고대역폭 전용 보안 연결을 통해 Azure 연결|
|Azure Network Watcher|시나리오 기반 분석을 사용하여 네트워크 문제를 모니터링하고 진단|
|Azure Firewall|스케일링 성능에 제한이 없고 보안 수준이 높은 고가용성 방화벽 구현|
|Azure Virtual WAN|로컬 사이트와 원격 사이트를 연결하는 통합 WAN(광역 네트워크) 구축|

### c. Storage

공통 특성
- 중복 및 복제 기능을 갖추고 있어 내구성과 가용성이 뛰어남
- 자동 암호화와 역할 기반 액세스 제어를 통해 보안을 유지
- 스토리지 제한이 없어 확장성이 뛰어남
- 유지 관리 및 사용자에 대한 중요한 문제를 관리
- HTTP 또는 HTTPS를 통해 전 세계 어디에서나 액세스

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Blob Storage|비디오 파일이나 비트맵 같은 대규모 개체를 위한 스토리지 서비스|
|Azure File Storage|파일 서버처럼 액세스하고 관리할 수 있는 파일 공유|
|Azure Queue Storage|애플리케이션 간 메세지 큐에 넣고 안정적으로 전달하기 위한 데이터 저장소|
|Azure Table Storage|비관계형 정형 데이터(정형 NoSQL 데이터)를 클라우드에 저장하여 키/특성 스토어에 스키마 없는 설계 제공|

### d. Mobile

개발자가 iOS, Android 및 Windows 앱용 모바일 백 엔드 서비스를 쉽고 빠르게 만들수 있다.

- 오프라인 데이터 동기화
- 온-프레미스 데이터 연결
- 푸시 알림 브로드캐스트
- 비즈니스 요구 사한과 일치하다록 자동 크기 조정

### e. Database

Azure에서는 다양한 형식과 볼륨의 데이터를 저장하도록 여러 데이터 베이스 서비스 제공

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Cosmos DB|NoSQL 옵션을 지원하는 글로벌 분산형 데이터베이스|
|Azure SQL Database|자동 스케일링과 필수 인텔리전스, 강력한 보안으로 관리되는 관계형 데이터베이스|
|Azure Database for MySQL|고가용성, 보안이 포함된 스케일링 가능한 MySQL 관계형 데이터베이스|
|Azure Database for PostgreSQL|고가용성, 보안이 포함된 스케일링 가능한 PostgreSQL 관계형 데이터베이스|
|Azure Virtual Machines SQL Server|클라우드에서 엔터프라이즈 SQL Server 앱을 호스트하는 서비스|
|Azure Synapse Anyalytics|추가 비용 없이 모든 스케일링 수준에서 필수 보안을 제공하며 완벽히 관리되는 데이터 웨어하우스|
|Azure Database Migration Service|애플리케이션 코드 변경 없이 데이터베이스를 클라우드로 마이그레이션하는 서비스|
|Azure Cache for Redis|자주 사용하는 정적 데이터를 캐시하여 데이터 및 애플리케이션 대기 시간을 줄이는 완전 관리형 서비스|
|Azure Database for MariaDB|고가용성, 보안이 포함된 스케일링 가능한 PostgreSQL 관계형 데이터베이스|

### f. Web

Azure에서는 웹앱 및 HTTP 기반 웹 서비스의 빌드 및 호스트에 대한 지원

|서비스 이름|서비스 기능|
|:--|:--|
|Azure App Service|클라우드 웹 기반 앱을 신속하게 만든다|
|Azure Notification Hubs|백 엔드에서 원하는 플랫폼으로 푸시 알림을 전송|
|Azure API Management|개발자, 파트너 및 직원에게 API를 안전하게 대규모로 게시|
|Azure Cognitive Search|완전 관리형 SaaS(Search as a Service)를 배포|
|Azure App Service의 Web Apps 기능|업무용 웹앱을 대규모로 만들고 배포|
|Azure SignalR Service|실시간 웹 기능을 쉽게 추가|

### g. IoT

여러 서브에서 Azure IoT를 위한 엔드투엔드 솔루션을 지원하고 구동


|서비스 이름|서비스 기능|
|:--|:--|
|IoT Central|대규모 IoT 자산의 연결, 모니터링 및 관리를 도와주는 완전 관리형 글로벌 IoT SaaS(Software as a Service) 솔루션|
|Azure IoT Hub|수백만 개의 IoT 디바이스 간에 안전한 통신 및 모니터링을 제공하는 메시징 허브|
|IoT Edge|데이터 분석 모델을 IoT 디바이스로 직접 푸시할 수 있는 완전 관리형 서비스로, 클라우드 기반 AI 모델 참조 필요 없이 상태 변화에 신속히 대응|

### h. Big Data

대량의 데이터를 말하며 모든 형식과 크기의 데이터에 지원 된다.
대규모 데이터 세트를 처리하기 위해 오픈 소스 클러스터 기술이 개발 되었다.

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Synapse Analytics|대규모 병렬 처리를 활용하여 페타데이터 규모 데이터에서 복잡한 쿼리를 빠르게 실행하는 클라우드 기반 엔터프로이즈 데이터 웨어하우스|
|Azure HDInisght|클라우드의 관리형 Hadoop 클러스터를 사용하여 대규모 데이터를 처리|
|Azure Databricks|Apache Spark 기반의 공동 작업용 분석 서비스를 Azure의 다른 빅 데이터 서비스와 통합|

### i. AI

클라우드 컴퓨팅과 관련된 AI는 광범위한 서비스에 기반하며 이러한 서비스 중에는 기계 학습이 핵심이다.
머신러닝은 컴퓨터에서 기존 데이터를 사용하여 미래 동작, 결과 및 추세를 예측하는 데이터 과학 기술이다.
Machine Learning을 사용하면 컴퓨터에서 명시적으로 프로그래밍하지 않고 학습한다.

일반적인 AI 및 기계 학습 서비스 유형

|서비스 이름|서비스 기능|
|:--|:--|
|Azure Machine Learning Service|기계 학습 모델의 개발, 교육, 테스트, 배포, 관리 및 추적에 사용할 수 있는 클라우드 기반 환경이다. 모델을 자동으로 생성하여 사용자에 맞게 조정 할 수 있다. 로컬 머신의 학습을 시작한 다음, 클라우드로 확장 가능하다.
|Azure ML Studio|미리 빌드된 기계 학습 알고리즘 및 데이터 처리 모듈을 사용하여 기계 학습 솔루션을 빌드, 테스트, 배포 할 수 있는 공동 작업용 시각적 작업 영역이다.|

밀접한 관련이 있는 제품 세트를 Cognitive Services라고 하며 애플리케이션에서 이러한 미리 빌드된 API를 사용하여 복잡한 문제를 해결 한다.

|서비스 이름|서비스 기능|
|:--|:--|
|Vision|이미지 처리 알고리즘을 사용하여 사진 및 동영상을 스마트하게 식별, 캡셔닝, 인덱싱, 조정 한다.|
|Speech|음성을 텍스트로 변환하거나, 음성을 인증에 사용하거나, 앱에 화자 인식을 추가하다.|
|지식 매핑|지능형 추천 및 의미 체계 검색 등의 작업을 해결하기 위해 복잡하 정보와 데이터를 매핑 할 수 있다.|
|Bing Search|Add Bing Search API를 앱에 추가하고 단일 API 호출 기능을 활용하여 수십억 개의 웝 페이지, 이미지, 동영상 및 뉴스를 검색하는 기능을 사용한다.|
|자연어 처리|앱에서 미리 빌드된 스크립트를 사용하여 자연어를 처리하고, 감정을 평가하고, 사용자가 원하는 것을 인식하는 방법을 학습하도록 한다.|

### j. DevOps

DevOps는 사람, 프로세스 및 기술 통합을 통해 소프트웨어 제공을 자동화하여 사용자에게 지속적인 가치를 제공한다. Azure DevOps를 사용하여 애플리케이션에 연속 통합, 제공 및 배포를 제공하는 빌드 및 릴리스 파이프라인을 만들 수 있다. 리포지토리 및 애플리케이션 테스트를 통합하고, 애플리케이션 모니터링을 수행하고, 빌드 아티팩트로 작업할 수 있다. 또한 추적용 백로그 항목으로 작업하고, 인프라 배포를 자동화하고, Jenkins 및 Chef와 같은 광범위한 타사 도구 및 서비스를 통합할 수 있다. 이러한 모든 기능과 그 외 여러 기능은 Azure와 긴밀하게 통합되므로 애플리케이션의 일관적이고 반복 가능한 배포가 가능하여 빌드 및 릴리스 프로세스가 간소화된다.

|서비스 이름|서비스 기능|
|:--|:--|
|Azure DevOps|고성능 파이프라인, 무료 개인 Git 리포지토리, 구성 가능한 Kanban보드, 광범위한 자동화 및 클라우드 기반 부하 테스트와 같은 개발 공동 작업 도구를 사용한다. 이전 Visual Studio Team Service로 알려져 있다.|
|Azure DevTest Labs|배포 파이프라인에서 바로 애플리케이션을 테스트하거나 시연하기 위해 주문형 Windows 및 Linux 환경을 신속하게 만들수 있다.|

## 11. Azure 계정 시작

Azure 서비스를 만들고 사용하려면 Azure 구독이 필요하다. 자체 애플리케이션 및 비즈니스 요구 사항을 해결할 때는 Azure 계정을 만들어 구동을 생성하여야 한다. Azure 계정을 만든 후에는 추가 구독을 무료로 만들 수 있다.

<img src="https://github.com/young-hwang/azure-900/blob/main/img/5.png" width="50%" />

## 12. Azure 계정 만들기

Azure 웹 사이트에서 가입하여 Microsoft에서 직접 또는 Microsoft 담당자, Microsoft 파트너를 통해 Azure 액세스 권한을 구매 할 수 있다.

## 13. Azure 체험 계정이란

- 12개월간 인기 있는 Azure 제품에 대한 무료 액세스
- 처음 30일 동안 사용할 크레딧
- 항상 무료로 제공되는 25개 이상의 제품에 대한 액세스

가입 시 전화번호, 카드번호, Microsoft 또는 Github 계정 필요

## 14. Azure 체험 학생 계정

- 12개월간 특정 Azure 서비스에 비용 없이 액세스
- 처음 12개월 동안 사용할 크레딧
- 특정 소프트웨어 개발자 도구에 비용 없이 액세스

신용카드 없이 가입가능

## 15. Learn 샌드박스

많은 Learn 연습에서는 Azure 계정에 추가되는 임시 구독을 만드는 샌드박스라는 기술을 사용한다. 임시 구독을 통해 Learn 모듈 기간 동안 Azure 리소스를 만들수 있다.

# 2. Azure의 기본 개념 설명

## 1. Public, Private, Hybrid Cloud

클라우드 컴퓨팅의 세 가지 배포 모델은 'Public Cloud', 'Private Cloud', 'Hybrid Cloud'이다. 클라우드에 마이그레이션 할 때는 각 배포 모델의 다른 측면을 고려해야 한다.

|배포 모델|설명|
|:--|:--|
|Public Cloud|서비스는 공용 인터넷을 통해 제공되고 서비스를 구매하려는 누구에게나 제공된다. 서버, 스토리지와 같은 클라우드 리소스는 타사 클라우드 서비스 공급자가 소유하고 운영하며 인터넷을 통해 제공된다.|
|Private Cloud|하나의 기업 또는 조직의 선택된 사용자만 독점적으로 사용하는 컴퓨팅 리소스로 구성된다. 조직의 온사이트(온-프레미스)데이터 센터에 있을 수 있거나 타사 서비스 공급자가 호스트 할 수 있다.|
|Hybrid Cloud|Public Cloud와 Private Cloud간에 데이터 및 애플리케이션을 공유할 수 있도록하여 두 클라우드를 결합하는 컴퓨팅 환경이다.|

## 2. Cloud 모델 비교

### Public Cloud

- 확장 시 자본 지출이 없다.
- 애플리케이션을 신속하게 프로비전 및 프로비전 해제할 수 있다.
- 조직은 사용하는 항목에 대해서만 비용을 지불한다.

### Private Cloud

- 시작 및 유지 관리를 위해 하드웨어 구매해야 한다.
- 조직이 리소스 및 보안을 완전히 제어 할 수 있다.
- 조직이 하드웨어 유지 관리 및 업데이트를 담당한다.

### Hybrid Cloud

- 최고의 유연성을 제공한다.
- 조직이 애플리케이션을 실행할 위치를 결정한다.
- 조직이 보안, 규정 준수 또는 법적 요구 사항을 제어 한다.

## 3. Cloud Computing의 이점

- 고가용성 : 선택한 SLA(서비스 수준 계약)에 따라, 클라우드 기반 앱은 문제가 발생할 경우에도 명백한 가동 중지 시간 없이 지속적인 사용자 환경 제공
- 확장성 : 클라우드 앱을 '수직' 및 '수평'으로 스케일링 할 수 있다.
- 탄력성 : 자동 스케일링을 활용하도록 클라우드 기반 앱을 구성하여 앱에 필요한 리소스를 항상 제공
- 민첩성 : 앱 요구 사항이 변경되면 신속하게 클라우드 기반 리소스를 배포하고 구성
- 지리적 배포 : 전 세계 지역 데이터 센터에 앱과 데이터를 배포 할 수 있으므로 고객이 지역에서 항상 최고의 성능을 유지
- 재해 복구 : 클라우드 기반 뱁업 서비스, 데이터 복제 및 지역 배포를 활용하여 재해가 발생하더라도 데이터를 안전하게 유지

## 4. 자본 비용 및 운영 비용

- CapEx(자본 비용) : 물리적 인프라 비용을 초기에 지출한 다음, 시간이 지남에 따라 초기 비용을 공제한다. 초기 비용은 시간이 지남에 따라 가치가 감소한다.
- OpEx(운영 비영) : 현재 서비스 또는 제품에 대해 지출되어 청구되는 비용. 지출하는 동일 연도에 공제 할 수 있다. 초기 비용은 없으며 서비스 또는 제품을 사용하는 비용을 지불한다.

## 5. Cloud Computing은 사용량 기반 모델

클라우드 서비스 공급자는 사용량 기반 모델로 운영된다.
사용량 기반 모델은 다음과 같은 이점이 있다.

- 선불 비용이 없다.
- 사용자가 최대한 활용하지 못할 수도 있는 값비싼 인프라를 구입하고 관리할 필요가 없다.
- 필요한 경우 추가 리소스의 요금을 지불 할 수 있다.
- 더 이상 필요하지 않은 리소스 사용 요금을 지불하지 않다록 할 수 있다.

## 6. Cloud Service Model

|모델|정의|설명|
|:--|:--|:--|
|IaaS|Infrastructure-as-a-Service|물리적 서버 관리에 가장 가깝다. 클라우드 공급자가 하드웨어를 최신 상태로 유지하지만 운영 체제 유지 관리 및 네트워크 구성은 클라우드 테넌트가 담당한다.|
|PaaS|PaaS|관리형 호스팅 환경이다. 클라우드 공급자가 가상 머신 및 네트워킹 리소스를 관리하고 클라우드 테넌트가 애플리케이션을 관리형 호스팅 환경에 배포한다.|
|SaaS|SaaS|클라우드 공급자는 가상 머신, 네트워킹 리소스, 데이터 스토리지, 애플리케이션 등 애플리케이션 환경의 모든 측면을 관리한다. 클라우드 테넌트는 클라우드 공급자가 관리하는 애플리케이션에 데이터만 제공한다.|

<img src="https://github.com/young-hwang/azure-900/blob/main/img/6.png" width="50%" />

## 7. IaaS

가장 유연한 범주의 클라우드 서비스
애플리케이션을 실행하는 하드웨어를 완벽하게 제어
하드웨어를 구입하는 대신 IaaS를 통해 임대

### 장점

- CapEx 없음 : 초기비용 없음
- 민첩성 : 애플리케이션에 신속하게 액세스, 필요한 경우 프로비저닝 해제
- 관리 : 공유 책임 모델에 적용, 사용자는 프로비저닝 관리 및 유지, 클라우드 공급자는 클라우드 인프라를 관리 및 유지
- 사용량 기반 모델 : OpEx 모델로 사용 및 운영하는 리소스 비용만 지불
- 기술 : 깊은 기술이 없이도 퍼블릭 클라우드를 배포 및 사용
- 클라우드 이점 : 클라우드 공급자의 기술과 전문 지식을 활용하여 워크로드 보안 및 고가용성 보장
- 유연성 : 가장 유연한 서비스, 하드웨어 구성 및 관리를 제어

## 8. PaaS

IaaS와 이점 및 고려 사항이 동일하지만 몇가지 추가 사항 존재

### 장점

- CapEx 없음
- 민첩성 : IaaS보다 민첩성이 뛰어남, 사용자가 애플리케이션 서버 구상 필요 없음
- 사용량 기반 모델
- 기술
- 클라우드 이점
- 생산성 : 클라우드 공급자가 모든 플랫폼 관리를 처리하므로 사용자는 애플리케이션 개발에만 집중, 인터넷을 통해 플랫폼에 액세스하므로 서비스로서의 분산팀을 운영하기 더 쉽다. 보다 쉽게 전 세계에서 사용하도록 설정 할 수 있다.

### 단점

- 플랫폼 제한 사항 : 몇몇 클라우드 플랫폼 제한 사항이 애플리케이션 실행 방식에 영향을 줄 수 있다.

## 9. SaaS

사용자와 최종 사용자 또는 고객을 위해 중앙에서 호스트 및 관리되는 소프트웨어
모든 고객이 한 가지 애플리케이션 버전을 사용하고 월간 또는 연간 구독을 통해 라이선스가 부여 되는 아키텍처를 기반으로 한다.
IaaS와 동일하지만 몇 가지 추가 사항 존재

### 장점

- CapEx 없음
- 민첩성 : 사용자가 직원에게 최신 소프트웨어에 대한 액세스 권한을 빠르고 쉽게 재공
- 종량제 가격 책정 모델 : 사용자는 소프트웨어 사용량과 관계없이 매월 또는 매년 구독 모델에서 소프트웨어 비용 지불
- 기술 : 뛰어난 기술 없이도 SaaS를 배포 및 사용
- 유연성 : 사용자가 어디서든 동일한 애플리케이션 데이터에 액세스

### 단점

- 소프트 웨어 제한 사항 : 소프트웨어 애플리케이션의 몇 가지 제한 사항이 사용자의 작업 방식에 영향, 소프트웨어를 있는 그대로 사용하므로 기능을 직접제어 할 수 없음

## 10. 클라우드 서비스 모델 비교

|IaaS|PaaS|SaaS|
|:--|:--|:--|
|가장 유연한 클라우드 서비스|애플리케이션 개발에 집중|종량제 가격 책정 모델|
|사용자가 애플리케이션을 위한 하드웨어 구성 및 관리|클라우드 공급자가 플랫폼 관리 담당|구독 모델로 비용을 지불|

<img src="https://github.com/young-hwang/azure-900/blob/main/img/7.png" width="50%" />

## 11. 서버리스 컴퓨팅

PaaS와 마찬가지로 서버리스 컴퓨팅을 사용하면 개발자가 인프라를 관리할 필요 없이 빠르게 애플리케이션을 빌드할 수 있다.
서버리스 애플리케이션에서는 클라우드 서비스 공급자가 코드 실행에 필요한 인프라를 자동으로 프로비저닝, 스케일링 및 관리 한다.
서버리스 아키텍처는 스케일링 성능이 뛰어나고 이벤트 기반이므로 특정 기능 또는 트리거가 발생할 때만 리소스를 사용한다.
코드는 여전히 서버에서 실행된다.
“서버리스”라는 이름은 인프라 프로비저닝 및 관리와 관련된 작업이 개발자에게 표시되지 않는다는 점에서 유래한다.
이 방식을 통해 개발자는 비즈니스 논리에 더욱 집중하고 비즈니스 핵심에 더 많은 가치를 제공할 수 있다.
서버리스 컴퓨팅을 통해 팀은 생산성을 향상하고 제품 출시를 단축할 수 있으며 조직은 리소스를 최적화하고 계속해서 혁신에 집중할 수 있다.

# 3. 핵심 Azure 아키텍처 구성 요소 설명

## 1. Azure 구독, 관리 그룹, 리소스 개요

<img src="https://github.com/young-hwang/azure-900/blob/main/img/5.png" width="50%" />

- 리소스 : 가상 머신, 스토리지 또는 SQL 데이터베이스와 같이 사용자가 만든 서비스의 인스턴스
- 리소스 그룹 : 리소스는 리소스 그룹으로 결합. 웹앱, 데이터베이스, 스토리지 계정과 같은 Azure 리소스가 배포되고 관리되는 논리적 컨테이너 역할
- 구독 : 사용자 계정과 해당 사용자 계정에서 만든 리소스를 그룹화. 각 구독에 대해 만들고 사용할 수 있는 리소스의 양에 제한 또는 할당이 있다. 팀 또는 프로젝트에서 만든 리소스 및 그로 인한 비용을 관리할 수 있다.
- 관리 그룹 : 여러 구독에 대한 액세스, 정책 및 규정 준수를 관리하는데 도움. 관리 그룹에 속한 모든 구독은 관리 그룹에 적용된 조건을 자동 상속.

## 2. Azure 지역, 가용성 영역 및 지역쌍

### 1. Azure 지역

지역이란 가까운 곳에 있고 대기 시간이 짧은 네트워크를 통해 연결된 데이터 센터를 하나 이상 포함하고 있는 지리적 영역.
Azure는 각 Azure 지역의 리소스를 지능적으로 할당하고 제어하여 워크로드의 적절한 균형을 유지함.
리소스 배포 할 때 Azure 지역을 선택해야 하는 경우가 자주 있음.

Azure Active Directory, Azure Traffic Manager, Azure DNS는 특정 Azure 지역 선택 필요 없음(글로벌 Azure 서비스)

### 2. 지역이 중요한 이유

사용자가 어디에 있든 사용자와 더욱 가까운 위치에서 애플리케이션을 제공.
글로벌 지역은 향상된 확장성 및 중복성을 제공.
서비스의 데이터 보존을 유지.

### 3. 특수 Azure 지역

규정 준수 또는 법적 목적에 맞게 애플리케이션을 빌드할 때 사용할 수 있는 특수 Azure 지역 존재.

- US DoD 중부, US Gov 버지니아, US Gov 아이오와 등 : 미국 정부 기관 및 파트너를 위한 물리적 및 논리적 네트워크로 격리된 Azure 인스턴스. 선별된 미국인이 운영. 추가 규정 준수 인증서를 포함.
- 중국 동부, 중국 북부 등 : Microsoft 및 21Vianet 간의 고유한 파트너십을 통해 사용. Microsoft에서 데이터 센터를 직접 관리하지 않음.

### 4. Azure 가용성 영역

장애 발생시 정보를 보호 할 수 있도록 서비스와 데이터를 중복시킴. 인프라 호스트 시 자체적으로 중복성 설정하려면 중복된 하드웨어 환경을 구축해야함. 가용성 영역을 통해 앱의 가용성을 높일 수 있음.

### 5. 가용성 영역이란?

Azure 지역 내에서 물리적으로 분리된 데이터 센터. 각 가용성 영역은 독립된 전원, 냉각 및 네트워킹을 갖춘 하나 이상의 데이터 센터로 구성. 가용성 영역은 격리 경계로 설정. 한 영역이 다운되어도 다른 영역은 계속 작동. 고속 프라이빗 광 네트워크로 연결.

### 6. 앱에서 가용성 영역 사용

가용성 영역을 사용하여 중요 업무용 애플리케이션을 실행 할 수 있으며, 한 영역 내에 컴퓨팅, 스토리지, 네트워킹 및 데이터 리소스를 공동 배치하고 다른 영역에 복제하여 애플리케이션 아키텍처에 고가용성을 구현 할 수 있음.(영역 간에 데이터 전송하는 비용 발생)
가용성 영역은 주로 VM, 관리 디스트, 부하 분산 장치 및 SQL 데이터베이스에 주로 사용.

- 영역 서비스 : 특정 영역(VM, 관리 디스크, IP 주소)에 리소스를 고정
- 영역 중복 서비스 : 플랫폼이 영역에서 자동으로 복제(영역 중복 스토리지, SQL 데이터베이스)
- 비지역 서비스 : Azure 지역에서 항상 사용할 수 있으며 영역 전체 중단뿐만 아니라 지역 전체 중단도 복원

### 7. Azure 지역 쌍

가용성 영역은 하나 이상의 데이터 센터를 사용하여 만들어짐. 단일 지역에는 최소 세 개의 영역이 존재. 두 데이터 센터 모두 중단 될 수 있는 대규모 재해 발생 가능성 있음. 이러한 이유로 Azure는 항상 Azure 지역 쌍을 만듬.

### 8. Azure 지역 쌍이란?

각 Azure 지역은 300마일 이상 떨어져 있는 동일한 지리적 위치내의 다른 Azure 지역과 항상 쌍을 이룸.
이 방법을 통해 한 지리적 위치에서 VM 스토리지 같은 리소스를 복제 할 수 있으며, 두 Azure 지역에 동시에 영향을 주는 자연재해, 내전, 정전 또는 물리적 네트워크 중단 등의 이벤트 때문에 서비스가 중단 될 가능성을 줄임.
Azure 지역 쌍의 예로는 미국 동부와 미국 서버 쌍, 동남 아시아와 동아시아 쌍이 있다.
Azure 지역 쌍은 직접 연결되고 Azure 지역 규모의 재해를 피할 수 있도록 충분히 멀리 떨어져 있기 때문에 안정적인 서비스 및 데이터 중복성을 제공하는데 사용 할 수 있음. 일부 서비스는 Azure 지역 쌍을 사용하여 자동 지역 중복 스토리지를 제공.

Azure 지역 쌍의 추가적인 이점
- 광범위한 Azure 중단이 발생하는 경우 해당 지역 쌍에서 호스트되는 애플리케이션에 대해 하나 이상의 지역이 가능한 한 빨리 복원되도록 하기 위해 모든 쌍 중에서 하나의 지역이 우선하도록 지정
- 계획된 Azure 업데이트는 가동 중지 및 애플리케이션 중단 위험을 최소화하기 위해 한 번에 한 Azure 지역 쌍으로 롤아웃.
- 데이터는 세금 및 법률 집행 관할 구역에 사용될 수 있게 동일한 지리적 위치 내에 쌍으로 상

## 3. Azure 리소스 및 Azure Resource Manager

- 리소스 : Azure를 통해 사용 할 수 있는 관리 가능한 항목.(VM, 소토리지 계정, 웹앱, 데이터베이스 등)
- 리소스 그룹 : 리소스를 보관하는 컨테이너. 리소스 그룹은 그룹으로 관리하려는 리소스만 포함.

### 1. Azure 리소스 그룹

Azure 플랫폼의 기본 요소. 리소스의 논리 컨테이너.
모든 리소스는 리소스 그룹에 있어야하고 한 리소스는 단일 리소스 그룹의 멤버이다. 리소스 그룹은 중첩 할 수 없다.

### 2. 논리적 그룹화

리소스 그룹의 용도는 Azure 리소스를 관리하고 구성. 각
사용량, 형식 또는 위차가 비슷한 리소스를 한 리소스 그룹에 배치하면 Azure에서 만드는 리소스에 질서를 부여하고 체계적으로 구성

### 3. 수명 주기

리소스 그룹을 삭제하면 그 안에 리소스도 모두 삭제
리소스 수명 주기 구성 시 실험 후 리소스를 폐기하는 환경에서 유용

### 4. 권한 부여

리소스 그룹은 RBAC(역할 기반 액세스 제어) 권한을 적용하는 범위
리소스 그룹에 RBAC 권한을 적용하면 관리 간편, 액세스 제한

## 4. Azure Resource Manager

Azure용 배포 및 관리 서비스.
Azure 계정에서 리소스 생성, 업데이트, 삭제하는 관리 계층 제공.
Azure Portal에서 사용할 수 있는 모든 기능은 PowerShell, Azure CLI, REST API 및 클라이언트 SDK를 통해서도 사용 가능

### 1. 리소스 관리자를 사용할 경우의 이점

- 스크립트가 아니라 선언적 템플릿을 통해 인프라 관리. Resource Manager Template은 Azure에 무엇을 배포하는지 정의하는 JSON 파일
- 리소스를 개별적으로 처리하는 대신, 솔루션의 모든 리소스를 그룹으로 배포, 관리 및 모니터링
- 개발 수명 주기 내내 솔루션을 다시 배포
- 리소스가 올바른 순서로 배포되도록 리소스 간의 종속성을 정의
- 모든 서비스에 액세스 제어를 적용
- 리소스에 태그를 적용하여 구독의 모든 리소스를 논리적으로 구성
- 동일한 태그를 공유하는 리소스 그룹에 대한 비용을 확인하여 조직의 청구를 명확히 함

## 5. Azure 구독 및 관리 그룹

### 1. Azure 구독

Azure를 사용하려면 Azure 구독 필요.
구독은 Azure 제품 및 서비스에 대한 인증되고 권한이 부여된 액세스 제공
계정에는 서로 다른 청구 모델 보유하고 다른 액세스 관리 정책을 적용하는 하나 또는 여러 개의 구독이 있음.
2가지 유형의 구독 경계를 사용

- 청구 경계 : Azure 사용에 따른 Azure 계정 청구 방식 결정. 다양한 유형의 청구 요구 사항에 따라 여러 개의 구독을 만듬.
- 액세스 제어 경계 : Azure 구독 수준에서 액세스 관리 정책을 적용. 다른 조직 구조를 반영하기 위해 별도의 구독을 만들 수 있음.

### 2. 추가 Azure 구독 만들기

- 환경 : 리소스를 관리할 때 개발 및 테스트, 보안을 위한 별도의 환경을 설정하거나 규정 준수 상의 이유로 데이터 격리 할 수 있음. 이 디자인은 리소스 액세스 제어가 구독 수준에서 발생하기 때문에 유용
- 조직 구조 : 여러 조직 구조를 반영하는 구독.
- 청구 : 청구를 위해 추가 구독을 만들 수 있음. 비용은 구독 수준에서 먼저 집계되므로 사용자의 요구에 따라 비용을 관리하고 추적하는 구독 생성
- 구독 제한 : 구독은 일부 하드 제한에 바인딩

### 3. 요구 사항에 맞게 청구 사용자 지정

구독이 여러 개인 경우 청구서 섹션으로 구성 할 수 있음.
각 청구 섹션은 해당 월에 발생한 요금을 보여 주는 청구서의 폼목.

## 6. Azure 관리 그룹

조직에 구독이 많은 경우 해당 구독에 대한 액세스, 정책 및 규정 준수를 효율적으로 관리하는 방법 필요.
구독을 관리 그룹이라고 하는 컨테이너에 구성하고 거버넌스 조건을 관리 그룹에 적용.
관리 그룹에 속하는 모든 구독은 관리 그룹에 적용되는 조건을 자동으로 상속.

### 1. 관리 그룹 및 구독의 계층 구조

리소스를 통합 정책 및 액세스 관리를 윈한 계층 구조로 구성하는 유연한 관리 그룹 및 구독 구조 만들수 있음

### 2. 관리 그룹에 대한 중요 한 사실

- 단일 디렉터리에서 지원할 수 있는 관리 그룹 수는 10,000개
- 관리 그룹 트리에서 지원할 수 있는 최대 깊이 수준은 6(루트 수준, 구독 수준 제외
- 각 관리 그룹 및 구독은 하나의 부모만 지원
- 각 관리 그룹에는 여러 자식 요소가 있을 수 있음
- 모든 구독 및 관리 그룹은 각 디렉터리의 단일 계층 내에 위치

# 1. Azure 컴퓨팅 서비스 살펴보기

## 1. Azure 컴퓨팅 서비스 개요

클라우드 기반 애플리케이션을 실행하기 위한 주문형 컴퓨팅 서비스.
디스크, 프로세서, 메모리, 네트워킹 및 운영 체제와 같은 컴퓨팅 리소스 제공.

- Azure Virtual Machine
- Azure Container Instances
- Azure App Service
- Azure Functions(Serveless Computing)

### 1. 가상 머신

가상 머신은 물리적 컴퓨터의 소프트웨어 에뮬레이션.
가상 프로세서, 메모리, 스토리지 및 네트워킹 리소스가 포함
운영 체제 호스트하고 소프트웨어 설치하고 실행.

- Azure Virtual Machines : 클라우드 VM을 만들고 사용. IaaS를 다양한 방법으로 제공.
- Azure Virtual Machine Scale Sets : 동일한 VM 세트를 배포 및 관리. 모든 VM은 동일하게 구성 되었으며 가상 머신 확장 집합은 실제 자동 크기 조정을 지원하도록 디자인.
- Container/Kubernetes : 컨테이너를 배포하고 관리하는 데 사용할 수 있는 Azure 컴퓨팅 리소스. 단일 가상 머신 호스트에서 컨테이너화된 애플리케이션의 여러 인스번스를 실행.
- App Service : 모든 플랫폼에서 실행되는 엔터프라이즈급 웹, 모바일 및 API 앱을 신속하게 빌드, 배포 및 스케일링. 완전 관리형 플랫폼. PaaS.
- Functions : 기본 플랫폼이나 인프라가 아닌, 서비스를 실행하는 코드에 관해서만 관심이 있는 경우 적합. Azure Functions는 이벤트, 타이머 또는 다른 Azure 서비스로부터 받은 메시지에 대한 응답으로 작업 수행. 해당 작업을 수초 이내에 빠르게 완료할 수 있을 경우 사용.

## 2. Azure Virtual Machines를 사용하는 경우 결정

- OS에 대한 완전한 제어
- 사용자 지정 소프트웨어 실행
- 사용자 지정 호스팅 구성

미리 구성된 가상 머신 이미지를 선택하면 짧은 시간 안에 가상 머신을 만들고 프로비저닝.
이미지는 가상 머신을 만드는 데 사용되는 템플릿.

### 1. VM을 사용하는 경우의 예시

- 테스트 및 개발 도중
- 클라우드에서 애플리케이션을 실행하는 경우
- 데이터 센터를 클라우드로 확장하는 경우
- 재해 복구 도중
### 2. VM을 사용하는 클라우드로 이동

VM은 물리적 서버에서 클라우드로 이동 할 때 좋음.
물리적 서버의 이미지를 만들고 거의 또는 전혀 변경할 필요 없이 가상 머닌 내에서 호스트
설치된 OS 및 해당 OS를 실행하는 소프트웨어를 업데이트

### 3. Azure에서 VM 스케일링

VM을 함께 그룹화하여 고가용성, 확장성 및 중복성을 제공.

- Azure Virtual Machine Scale Sets
- Azure Batch

### 4. Virtual Machine Scale Sets란

부하 분산된 동일한 VM 그룹을 만들고 관리.
가상 머신 복제 시 웝 사이트 가상 머신의 여러 인스턴스 간에 요청을 라우팅하는 추가 서비스 구성을 자동 수행

### 5. Azure Batch란

수십, 수백 또는 수천 개의 가상 머신으로 스케일링함으로써 대규모 병렬 및 고성능 컴퓨팅(HPC) 일괄 작업을 수행 할 수 있음

Batch 작업 수행

- 컴퓨팅 VM 풀을 시작
- 애플리케이션 및 준비 데이터를 설치
- 사용자의 여러 작업을 포함하는 작업 실행
- 오류를 식별
- 작업을 큐에 다시 놓음
- 작업 완료 시 풀을 스케일 다운

## 3. Azure App Service를 사용하는 경우 결정

인프라를 관리할 필요 없이 원하는 프로그래밍 언어로 웹앱, 백그라운드 작업, 모바일 백 엔드 및 RESTful API를 빌드하고 호스트 가능.
자동 확장과 고가용성 제공.
App Service는 Windows 및 Linux 지원.
GitHub, Azure DevOps 또는 Git 리포지토리에서 자동화된 배포를 사용.
PaaS

### 1. Azure App Service 비용

선택한 App Service 요금제에 따라 요청을 처리하는 동안 앱에서 사용하는 Azure 컴퓨팅 리소스에 대한 요금을 지급
App Service 요금제에 따라 호스트에 사용된 하드웨어 양이 결정.

### 2. App Service 유형

- 웹앱
- API 앱
- WebJobs
- 모바일 앱

웹에 액세스할 수 있는 앱 호스트 시 결정해야 하는 대부분 인프라 관련 사항 처리

- 배포와 관리 기능이 플랫폼에 통합
- 엔드포인트에 보안이 설정
- 높은 트래픽 부하를 처리하기 위해 사이트를 빠르게 스케일링
- 기본 제공 부하 분산 및 Traffic Manager가 고가용성 제공

### 3. 웹앱

ASP.NET, ASP.NET Core, Java, Ruby, Node.js, PHP 또는 Pyhton을 사용하여 웹앱 호스트가 전체 지원.

### 4. API Web

웹 사이트를 호스트하는 것처럼 원하는 언어 프레임워크를 사용하여 REST 기반 웹 API를 빌드할 수 있음.
전체 Swagger 지원과 함께 Azure Marketplace에서 API를 패키지 및 게시하는 기능을 사용 가능.
HTTP, HTTPS 기반 클라이언트에서 사용

### 5. Webjobs

웹앱, API 앱 또는 모바일 앱과 동일한 컨텍스트에서 프로그램 또는 스크립트 실행 가능
프로그램과 스크립트는 트리거를 통해 예약하거나 실행 가능
애플리케이션 로직의 일부로 백그라운드 작업을 실행하는데 사용

### 6. Mobile App

iOS 및 Android 앱의 백 엔드를 빠르게 빌드

- 클라우드 기반 SQL 데이터베이스에 모바일 앱 데이터 저장
- MSA, Google, Twitter 및 Facebook과 같은 일반적인 소셜 공급 기업에 대한 고객을 인증
- 푸시 알림 보냄
- C# 또는 Node.js에서 사용자 지정 백 엔드 논리를 실행

Native iOS/Android, Xamarin 및 React Native 앱을 위한 SDK 지원

## 4. Azure Container Instances/Azure Kubernetes Service를 사용하는 경우 결정

VM은 물리적 하드웨어에 필요한 투자 비용을 줄이는 좋은 방법이나 가상 머신당 단일 운영 체제로 제한
단일 호스트에서 애플리케이션의 여러 인스턴스를 실행하려는 경우 컨테이너 사용이 좋음

### 1. Container란

가상화 환경. 단일 물리적 호스트에서 여러 가상 머신을 실행하는 것과 매우 유사.
단일 물리적 또는 가상 호스트에서 여러 컨테이너를 실행 할 수 있음.
VM과 달리 컨테이너에 대한 운영 체제를 관리하지 않음.
VM은 연결하고 관리할 수 있는 운영 체제의 인스턴스인 것 같지만, 컨테이너는 저용량이며 동적 생성, 스케일 아웃 및 중지를 할 수 있도록 설계.

### 2. 가상 머신과 컨테이너 비교

VM : 하나의 운영 체제만 실행, 서로 다른 런타임 환경이 필요한 여러 응용 프로그램을 제대로 실행하려면 여러 가상 머신 필요.
전처 컴퓨터를 에뮬레이트, 컴퓨터를 시작하거나 스냅숏을 찍는 등의 작업이 느림
Container : 단일 앱과 해당 종속성을 번들로 묶은 다음 컨테이너 호스트에 배포.
컨테이너 호스트는 운영 체제와 인프라를 추상화하여 표준화된 런타임 환경 제공
컨테이너화된 응용 프로그램이 다른 컨테이너화된 앱과 나란히 실행.
운영체제 수준의 가상화는 가상 머신보다 효율적인 이유
컨테이너화된 앱은 크기가 훨씬 더 작은 경향이 있고, 개발 런타임 환경이 프로덕션 환경과 똑같이 보일수 있음.

### 3. 컨테이너 관리

컨테이너는 필요에 따라 애플리케이션 인스턴스를 시작, 중지, 스케일 아웃 할 수 있는 컨테이너 오케스트레이터를 통해 관리
Azure Container Instances / AKS(Azure Kubernetes Service)

Azure Container Instances

가상 머신을 관리하거나 추가 서비스를 채택하지 않고도 Azure에서 컨테이너를 실행하는 가장 빠르고 간단한 방법. PaaS

Azure Kubernetes Service

많은 컨테이너를 자동화, 관리 및 상호 작용하는 작업
분산형 아키텍처와 대량의 컨테이너가 있는 완벽한 컨테이너용 오케스트레이션 서비스

### 4. Kubernetes란

대규모 컨테이너화된 응용 프로그램의 요구를 처리하기 위한 관리 시스템 필요.
컨테이너 기반 워크로드를 관리하는 데 가장 인기 있는 옵션 중 하나가 Kubernetes.
컨테이너 관리 자동화와 확장 가능한 API를 결합 클라우드 네이티브 응용 프로그램 관리.
Kubernetes 클러스터 노드에서 하나 이상의 컨테이너로 구성된 Pod 배치 관리.
Pod 중 하나가 충돌하면 Kubernetes는 해당 Pod의 새인스턴스 생성.
클러스터 노드가 제거되면 Kubernetes에서 영향을 받는 워크로드를 클러스터의 다른 노드로 이동.
Kubernetes Pod는 규모 요구사항에 맞게 더 많거나 적은 처리량을 제공하도록 크기 조정
크기조정은 수평 Pod 크기조정을 통해 수동 또는 자동으로 트리거.
응용 프로그램 업데이트 시 가동 중지 최소화를 위해 지그재그 형태로 배치 및 이전 버전 롤백.
컨테이너 저장소와 네트워킹도 관리.
Kubernetes 영구 저장소는 하나 이상의 컨테이너에 데이터 저장소를 제공 가능.
이 구성을 사용하면 컨테이너에서 응용 프로그램 데이터를 읽고 쓸 수 있으며 여러 Pod 인스턴스 간에 이 데이터를 유지.
Kubernetes에서 실행되는 응용 프로그램에서 데이터 저장 및 검색을 위한 Azure Storage, Azure Cosmos DB 같은 클라우드 기반 저장소 및 데이터 시스템을 사용하는 것이 일반적.
Kubernetes network plugin은 Pod를 인터넷에 공개하고 여러 복제본 간에 트래픽 부하를 분산 네트워크 격리 및 정책 기반 네트워크 보안과 같은 기능 제공, Kubernetes 클러스터의 Pod 간 통신 및 이름 확인 관리.

### 5. 솔루션 컨테이너 사용

마이크로 서비스 아키텍처에서는 솔루션을 더 작고 독립적인 조각으로 분할 가능.

### 6. 마이크로 서비스란

규모가 작고 잘 정의된 범위의 웹 서비스. 다른 서비스와 느슨하게 결합.
하나의 마이크로 서비스를 구축하는게 아닌 각각 단일의 비즈니스 기능을 구현하는 마이크로 서비스의 컬렉션으로 구성된 마이크로 서비스 아키텍처를 채택.
각 서비스는 작은 개발 팀이 관리 할 수 있는 개별 코드베이스.
팀이 전체 응용 프로그램을 다시 빌드 후 재배포 하지 않고도 서비스를 업데이트 가능.
상호 종속성이 없이 각 마이크로 서비스를 완전히 자율적으로 운영.
결함 격리 계층을 제공.

## 5. Azure Functions를 사용하는 경우 결정

Serveless 컴퓨팅은 서버, 인프라 및 운영 체제의 추상화.
서버리스 컴퓨팅을 통해 서버 인프라 관리 및 수요에 따른 리소스 할당 및 할당 해제를 처리.
사용하는 정확한 리소스에 대해서만 요금이 청구.

- 서버의 추상화 : 서버리스 컴퓨팅은 실행하는 서버를 추상화. 서버 인스턴스 명시적으로 예약하지 않음. 플랫폼이 해당 기능을 관리. 각 함수 실행은 다른 컴퓨팅 인스턴스에서 실행.
- 이벤트 기반 크기 조정 : 예정된 이벤트에 응답하는 워크로드에 적합. 이벤트는 다음을 통해 수행되는 트리거(타이머, HTTP(API, 웹후크), 큐 등) 개발자는 함수를 작성하고 함수에는 트리거 및 바인딩에 관한 코드 및 메타데이터 모두 포함. 플랫폼은 자동으로 함수 실행을 예약, 예정된 이벤트의 비율에 따라 컴퓨팅 인스턴스의 수를 조정.
- 마이크로 청구 : 코드가 실행된는 시간에 대해서만 비용을 지불.

### 1. Azure의 서버리스 컴퓨팅

사용자를 대신해 서버 관리 작업이 이미 처리됨.
장점 : 인프라 관리가 없음. 확장성. 사용한 만큼 비용지급.

## 5. Azure Functions를 사용하는 경우 결정

서버리스 컴퓨팅은 서버, 인프라, 운영 체제의 추상화.
서빈인프라 관리 및 수요에 따른 리소스 할당 및 할당 해제 처리

- 서버의 추상화 : 실행하는 서버 추상화. 서버 인스턴스 명식적 예약하지 않음. 플랫폼에서 관리. 각 함수는 다른 인스턴스에서 실행될 수 있음.
- 이벤트 기반 크기 조정 : 예정된 이벤트에 응답하는 워크로드에 적합.
- 마이크로 청구 : 코드가 실행되는 시간에 대해서만 비용 지불

### 1. Azure의 Serverless Computing

- Azure Functions : 함수는 거의 모든 최신 언어로 코드를 실행
- Azure Logic Apps : 논리 앱은 웹 기반 디자이너에서 설계되며 코드를 작성하지 않고도 Azure 서비스에 의해 트리거된 논리를 실행

### 2. Azure의 기능

서비스를 실행하는 코드에 관해서만 관심이 있는 경우 Azure Functions를 사용하는 것이 이상.
함수는 주로 Rest 요청을 통한 이벤트, 타이머 또는 다른 Azure서비스로부터 받은 메시지에 대한 응답으로 작업 수행.
수요에 따라 자동 스케일링되므로 수요가 가변적일 시 좋음.

- 상태 비저장(Default) : 이벤트에 응답할 때마다 다시 시작되는 것처럼 동작
- 상태 저장(Durable Functions) : 이전 작업 추적을 위한 컨텍스트가 함수를 통해 전달

### 3. Azure Logic Apps

Logic Apps는 함수와 유사. 함수가 코드를 실행하는 경우 Logic Apps는 비즈니스 시나리오를 자동화하도록 설계, 미리 정의된 논리 블록에서 빌드된 '워크플로'를 실행.
특정 이벤트가 발생하거나 사용 가능한 새 데이터가 특정 기준을 충족할때 실행되는 트리거를 통해 시작.
트리거 실행 시마다 워크플로의 작업을 실행하는 논리 앱 인스턴스를 만듬. 이러한 작업에는 조건부 명령문, 전환 명령문, 루프, 분기 등의 데이터 변환 및 흐름 컨트롤이 포함
Azure Portal or Visual Studio에서 비주얼 디자이너를 사용하여 논리 앱 워크플로 만듬. 워크플로 스키마를 사용하여 JSON파일로 지속

### 4. Functions 및 Logic Apps

복잡한 작업 수행위한 오케스트레이션 만들 수 있음.

- Functions : 각 단계를 완료하는 코드 작성
- Logic Apps : GUI를 사용하여 작업과 다른 작업과 어떻게 연관되는지 정의

|항목|Functions|Logic Apps|
|:--|:--|:--|
|시스템 상태|상태 비저장, Durable Functions가 상태 제공|상태 저장|
|개발|코드 중심(명력정)|디자이너 중심(선언적)|
|연결|약 12개의 기본 제공 타인딩 형식|대규모의 커넥션 컬렉션|
|작업|활동 함수에 대한 코드 작성|즉시 사용 가능한 작업의 대규모 컬렉션|
|모니터링|Azure Appliccation Insights|Azure Portal, Log Analytics|
|관리|REST API, Visual Studio|Azure Portal, REST API, Power Shell, Visual Studio|
|실행 컨텍스트|로컬, 클라우드에서 실행|클라우드에서만 실행|

## 6. Azure Virtual Desktop 사용하는 경우 결정

### 1. Azure Virtual Desktop이란?

클라우드에서 실행되는 데스크톱 및 애플리케이션 가상화 서비스.
모든 위치에서 클라우드 호스트 버전의 Windows 사용.
원격 데스크톱 및 앱에서 액세스하는 데 사용할 수 있는 앱에서 작동.
최신의 브라우저를 이용하여 Azure Virtual Desktop에 액세스.

### 2. Azure Virtual Desktop을 사용해야 하는 이유

- 최적의 사용자 환경 : 인터넷을 통해 모든 디바이스에서 연결. 사용자의 데이터 센터, 클라우드에 연결되는 앱 및 서비스 근처에서 세션 호스트 VM이 실행되게할 수 있음. 개인 (영구) 데스크탑을 통해 개별 소유권 제공.
- 보안 강화 : Azure Virtual Desktop은 Azure AD(Azure Active Directory)를 사용하는 사용자 데스크탑에 대한 중앙 집중식 보안 관리 제공. RBAC(Role Base Access Control)를 사용자에게 할당하여 데이터 액세스 보하.

### 3. Azure Virtual Desktop의 몇 가지 주요 기능

- 간소화된 관리 : Azure AD 및 RBAC를 사용하여 리소스에 대한 액세스 관리. VM 배포 자동, 업데이트 관리, 재해 복구 제공. Azure Monitor를 사용하여 관리.
- 성능 관리 : VM 호스트 풀에서 사용자의 부하를 분산하는 옵션을 제공. 호스트 풀은 동일한 구성이 할당된 VM 컬렉션.
- 다중 세션 Windows 10 배포 : 단일 VM에서 여러 명의 동시 사용자를 지원하는 Windows 10 Enterprise 다중 세션 사용가능.

### 4. Azure Virtual Desktop을 통해 비용을 어떻게 절감할 수 있는가?

- 사용자 라이선스 필요 : Microsoft 365가 있을 경우 추가 비용 없이 사용. Azure 리소스에 대한 비용만 지불.
- 컴퓨팅 비용 절감 : Azure Reserved Virtual Machine Instance를 구매하면 종량제 가격보다 72% 비용 절감

## 3. Azure Virtual Network 기본 사항

### 1. Azure Virtual Networking

Azure Virtual Network를 이용하면 VM, Web app, Database와 같은 Azure 리소스가 서로 통신 할 수 있고 인터넷 사용자 및 온-프레미스 클라이언트 컴퓨터와 통신 가능. Azure 네트워크를 다른 Azure 리소스와 연결되는 리소스 집합.

Azure Virtual Networking의 기능
- 격리 및 구분
- 인터넷 통신
- Azure 리소스간 통신
- 온-프레미스 리소스와 통신
- 네트워크 트래픽 라우팅
- 네트워크 트래픽 필터링
- 가상 네트워크 연결

### 2. 격리 및 구분

Virtual Network를 이용하여 격리된 여러 가상 네트워크를 만들 수 있음.
가상 네트워크 설정하는 경우 공용 또는 개인 IP 주소 범위를 사용하여 개인 IP 주소 공간을 정의. 이러한 IP 주소 공간을 서브넷으로 분할. 정의된 주소 공간의 일부를 명명된 각 서트넷에 할당.

### 3. 인터넷 통신

VM은 기본적으로 인터넷을 연결 할 수 있음. 공용 IP 주소 또는 공용 부하 분산 장치를 정의하여 인터넷에서 들어오는 연결이 가능하도록 설정 가능.

### 4. Azure 리소스 간 통신

- 가상 네트워크 : VM 뿐만 아니라 Power Apps용 App Service Enviroment, Azure Kubernetes Service 및 Azure 가상 머신 확장 집합과 같은 다른 Azure 리소스도 연결 할 수 있음.
- 서비스 엔드포인트 : 서비스 엔드포인트를 사용하여 Azure SQL Databases 및 스토리지 계정과 같은 다른 Azure 리소스 형식에 연결. Azure 리소스를 가상 네트워크에 연결하여 보안을 개선하고 리소스간의 최적의 라우팅 제공

### 5. 온-프레미스 리소스와 통신

로컬 환경과 클라우드 환경 모두에 걸쳐 네트워크 만듬.
- 지점 및 사이트 간 가상 사설망 : VPN 연결에 대한 일반적인 접근법. 조직 외부의 컴퓨터에서 회사 네트워크로 다시 연결.
- 사이트 간 VPN : 온-프레미스 VPN 디바이스 또는 게이트웨이를 가상 네트워크의 Azure VPN 게이트웨이에 연결.
- Azure ExpressRoute : 큰 대역폭과 더 높은 수준의 보안을 필요한 환경의 경우. 전용 프라이빗 연결 제공.

### 6. 네트워크 트래픽 라우팅

- Routing Table : 트래픽이 전달되어야 하는 방법에 대한 규칙을 정의.
- Border Gateway Protocol : Azure VPN Gateway나 ExpressRoute로 작업하여 온-프레미스 BGP 경로를 Azure VPN으로 전파

### 7. Network Traffic Filtering

- 네트워크 보안 그룹 : 인바운드 및 아웃바운드 보안 규칙이 포함될 수 있는 Azure Resource.
- Network Virtual Appliance : 방화벽 실행 또는 WAN 최적화 수행과 같은 특정 네트워크 기능을 수행

### 8. Virtual Network 연결

Vitual network peering을 사용하면 각 가상 네트워크의 리소스가 서로 통신할 수 있음. 상호 연결된 글로벌 네트워크 생성 가능.
UDR은 사용자 정의 라우팅. UDR을 사용하는 네트워크 관리자는 VNet 간은 물로 VNet 내의 서브넷 간의 라우팅 테이블을 제어하여 네트워크 트래픽 흐름을 더 세밀하게 제어

## 3. Azure Virtual Network 설정

### 1. 가상 네트워크 만들기

Azure Virtual Network를 만들 때 다양한 기본 설정을 구성. 여러 Subnet, DDoS(서비스 거부 공격) 방지, Service Endpoint등 고급 설정 가능.
설정 구성 사항

- 네트워크 이름 : 구독에서 고유. 전역적으로 고유할 필요 없음. 다른 가상 네트워와 식별하고 기억하기 쉽도록 생성
- 주소 공간 : CIDR(Classless Interdomain Routing) 형식으로 내부 주소 공간을 정의. 
- 구독 : 여러 구독 옵션을 선택 할 수 있는 경우
- 리소스 그룹 : 가상 네트워크는 리소스 그룹에 존재. 
- 위치 : 가상 네트워크를 만들려는 위치
- 서브넷 : 각 가상 네트워크 주소 범위 내에서 가상 네트워크의 주소 공간을 분할하는 하나 이상의 서브넷
- DDos Protection : 기본 또는 표준 DDos Protection 중 선택. 표준 DDos Protection은 프리미엄 서비스.
- 서비스 엔드 포인트 : 서비스 엔드 포인트 사용 설정. 

### 2. 추가 설정 정의

가상 네트워크 생성 후 추가 설정 정의 가능.
- 네트워크 보안 그룹 : 가상 네트워크 서브넷 및 네트워크 인터페이스 내외로 이동할 수 있는 네트워크 트래픽 형식을 필터링할 수 있는 보안 규칙
- 경로 테이블 : 각 서브에 대한 경로 테이블 자동으로 생성. 사용자 지정 경로 테이블 추가 가능.

### 3. 가상 네트워크 구성

가상 네트워크 생성 후 Azure Portal의 가상 네트워크 창에서 추가 설정가능(PowerShell, CloudShell)
추가 하위 창에서 설정을 검토하고 변경 가능.

- 주소 공간 : 주소 공간을 더 추가
- 연결된 디바이스 : 가상 네트워크를 사용하여 머신 연결
- 서브넷 : 서브넷을 더 추가
- 피어링 : 피어링 배열에서 가상 네트워크 연결

## 4. Azure VPN Gateway 기본 사항

VPN은 다른 네트워크 내에서 암호화된 터널을 사용. 일반적으로 둘 이상의 신리할 수 있는 사설망을 신뢰할 수 없는 네트워를 통해 서로 연결하기 위해 배포.
신뢰할 수 없는 네트워크를 이동하는 동안 도청이나 기타 공격을 방지하기 위해 트래픽이 암호화

### 1. VPN Gateway

가상 네트워크 게이트웨이의 유형. Azure Virtual Network 인스턴스에 배포.

- 사이트간 연결을 통해 온-프레미스 데이터 센터를 가상 네트워크에 연결
- 지점 및 사이트 간 연결을 통해 개별 디바이스를 가상 네트워크에 연결
- 네트워크간 연결을 통해 가상 네트워크를 다른 가상 네트워크에 연결

전송되는 모든 데이터는 인터넷을 통과할 때 프라이빗 터널에서 암호화.
가상 네트워크에 VPN Gateway하나만 배포 가능. 하나의 게이트 웨이로 여러 위치에 연결 가능.
VPN 배포시 유형을 정책 기반 또는 경로 기반으로 지정(암호화 트래픽을 지정하는 방식 차이)
두 게이트웨이 모두 미리 공유한 키를 유일한 인증 방법으로 사용.
두 유형은 버전 1 또는 버전 2 IKE(Internet Key Exchange)와 IPSec(Internet Protocol Security) 사용
IKE는 두 엔드 포인트간 보안 연결(암호화 계약)을 설정
이러한 연결이 IPSec 도구 모음으로 전달되면 VPN 터널에 캡슐화된 데이터 패킷이 암호화 및 암호 해독.

### 2. 정책기반 VPN

각 터널을 통해 암호화되어야 하는 패킷의 IP 주소를 정적으로 지정.
해당 IP 주소 세트에 대해 모든 데이터 패킷을 평가하여 해당 패킷이 전송될 터널을 선택.

- IKEv1만 지원
- 두 네트워크의 주소 접두사에 따라 VPN 터널을 통해 암호화 및 암호를 해독하는 방법이 결정되는 정적 라우팅. 터널링된 네트워크의 원본 및 대상이 정책에 선언. 라우팅 테이블에 선언 필요 없음.
- 특정 시나리오에서 사용

### 3. 경로기반 VPN

각 터널 뒤에 있는 IP 주소 정의하는 것이 번거로운 경우. IPSec 터널이 네트워크 인터페이스 또는 가상 터널 인터페이스로 모델링.
IP 라우팅에 따라 각 패킷을 전송 할 때 사용할 터널 인터페이스 중 하나가 결정. 온-프레미스 디바이스에서 애용.
토폴로지 변에대한 복원력이 좋음.

- 가상 네트워크 간 연결
- 지점 및 사이트 간 연결
- 다중 사이트 연결
- Azure ExpressRoute 게이트웨이와 동시 사용

주요기능
- IKEv2 지원
- 임의(와일드카드) 트래픽 선택기 사용
- 라우팅/전달 테이이 다른 IPSec 터널로 트래픽을 전달하는 '동적 라우 프로토콜'을 사용 가능. 이 경우 원본 네트워크와 대상 네트워크는 정책기반, 정적 라우팅 기반 VPN에 포함되므로 통계적으로 정의되지 않음. 대신 BGP(Border Gateway Protocol)와 같은 라우팅 프로토콜을 사용하여 동적으로 생성되는 네트워크 라우팅 테이을 기반으로 데이터 패킷이 암호화

### 4. VPN Gateway 크기

SKU 크기에 따라 결정
|SKU|사이트/네트워크 간 터널|집계 처리량 벤치마크|Border Gateway Protocol 지원|
|:--|:--|:--|:--|
|기본|최대: 10|100Mbps|지원되지 않음|
|VpnGw1/Az|최대: 30|650Mbps|지원|
|VpnGw2/Az|최대: 30|1Gbps|지원|
|VpnGw3/Az|최대: 30|1.25Gbps|지원|

### 5. VPN Gateway 배포

Azure 및 온-프레미스 리소스 필요

### 6. 필요한 Azure 리소스

- 가상 네트워크 : VPN Gateway에 필요한 추가 서브넷을 수용할 수 있는 가상 네트워크 배포. 한 가상 네트워 내에는 한 VPN Gateway.
- Gateway Subnet : Vpn Gateway용 Subnet. 적어도 /27 주소 마스크 사용.
- 공용 IP 주소 : 비영역 인식 게이트웨이를 사용하는 경우 기본 SKU 동적 공용 IP 주소 만듬. 이 주소는 온-프레미스 VPN 디바이스의 대상으로 라우팅 할 수 있는 공용 IP 주소 제공. 동적 IP이지만 VPN Gateway를 삭제하고 다시 만들기 전엔 변하지 않음.
- 로컬 네트워크 Gateway : VPN 게이트웨이가 연결될 위치 및 대상과 같은 온-프레미스 네트워크의 구성을 정의하는 로컬 네트워크 게이트웨이 생성. 이 구성에는 온-프레미스 VPN 디바이의 공용 IPv4 주소와 라우팅 가능한 온-프레미스 네트워크가 포함. IPSec 터널을 통해 온-프레미스 네트워크를 대상으로 하는 패킷을 라우팅.
- Virtual Network Gateway : 가상 네트워크와 온-프레미 데이터 센터 또는 다른 가상 네트워크 간에 트래픽을 라우팅하는 가상 네트워크 게이트웨이 생성.(VPN or ExpressRoute Gateway)
- 연결 : VPN Gateway와 local gateway 간의 논리적 연결을 만들기 위한 리소스
  - Local Network Gateway 에서 정의한 대로 온-프레미스 IPv4 주소에 연결
  - Virtual Network Gateway 및 연결된 공용 IP 주소에서 연결이 설정

<img src="https://github.com/young-hwang/azure-900/blob/main/img/8.png" width="50%" />

### 7. 필요한 온-프레미스 리소스

정책기반 또는 경로기반 VPN Gateway를 지원하는 VPN 디바이스
공용(인터넷 라우팅 가능) IPv4 주소

### 8. 고가용성 시나리오

내결함성 구성을 만드는 여러 가지 방법

### 9. 활성/대기

VPN Gateway 리소스가 하나만 표시되는 경우에도 기본적으로 VPN Gateway는 활성-대기 구성상태에 있는 두 인스턴스로 배포.
계획된 유지 관리 또는 계획 되지 않은 중이 활성 인스턴스에 영향을 줄 경우 대기 인스턴스는 사용자 개입 없이 자동으로 연결 역할 수행.
Failover 중에는 연결이 중단 되지, 계획된 경우 몇 초이내, 계획되지 않은 경우 90초 이내에 연결 복원

### 10. 활성/활성

BGP 라우팅 프로토콜에 대한 지원이 도입되면서 활성/활성 구성에서 VPN 게이트웨를 배포.
각 인스턴스에 고유한 공용 IP 주소 할당. 온-프레미스 디바이스에 각 IP 주소로 연결되는 별도의 터널 생성.
온-프레미스에 추가 VPN 디바이를 배포하여 가용성 높임.

### 11. ExpressRoute Failover

또다른 고가용성 옵션은 VPN 게이트웨이를 ExpressRoute 연결의 보안 장애 조치 경로로 구성.
ExpressRoute에는 복원력이 기본 제공. 하지만 ExpressRoute 위치에 영향을 주는 연결 또는 중단을 전달하는 케이블에 영향을 주는 물리적 문제에는 복원되지 않음.
ExpressRoute 회로의 중단과 관련된 위험이 있는 고가용성 시나리오에는 인터넷을 대체 연결 방법으로 사용.

### 12. 영역 중복 게이트웨이

가용성 영역을 지원하는 지역에서는 VPN 게이트웨이 및 ExpressRoute 게이트웨이를 영역 중복 구성으로 배포.
가상 네트워크 게이트웨이에 복원력, 확장성 및 고가용성 제공.
Azure 가용성 영역에서 게이트웨이를 배포하면 Azure에 대한 온-프레미스 네트워크 연결을 영역 수준 오류로부터 보호하면서 지역 내에서 물리적 및 논리적 게이트웨이를 구분.
이러한 게이트웨이에는 다른 게이트웨이 SKU가 필요하며 기본 공용 IP 주소 대신 표준 공용 IP 주소를 사용.

## 5. Azure ExpressRoute 기본 사항

ExpressRoute를 사용하면 연결 공급자의 도움을 받아 프라이빗 연결을 통해 온-프레미스 네트워크를 Microsoft클라우드로 확장.
ExpressRoute를 사용하면 Microsoft Azure 및 Microsoft 365와 같은 Microsoft클라우드 서브스에 대한 연결 설정가능.

연결은 공동 배치 시설의 연결 공급자를 통해 Any-to-Any(IP VPN) 네트워크, 지점 간 이더넷 네트워크 또는 가상 교차 연결에서 수행.
ExpressRoute 연결은 퍼블릭 인터넷을 통해 이동하지 않음.(인터넷을 통한 일반연결보다 속도 빠르며 대기 시간이 일관되고 보안성이 높음)

OSI의 2가지 계층을 중점적으로 다룸
- L2 : 데이터 링크 계층, 두 노드 사이에 노드 간 통신 제공
- L3 : 네트워크 계층, 노드 간의 라우팅 및 주소 지정을 제공

### 1. ExpressRoute의 기능 및 이점

- 연결 공급자를 통한 온-프레미스 네트워크와 Microsoft Cloud 간의 3계층 연결.
- 모든 지정학적 지역에 걸쳐 Microsoft 클라우드 서비스에 연결
- ExpressRoute 프리미엄 추기 기능으로 모든 지역에 걸쳐 Microsoft 서비스에 글로벌 연결
- BGP를 통해 네트워크와 Microsoft 간 동적 라우팅
- 높은 안정성을 위한 모든 피어링 위치의 기본 중복성
- 연결 가동 시간 SLA
- 비즈니스용 Skype에 대한 QoS지원

### 2. L3 연결

연결 파트너를 통해 온-프레미스 네트워크와 Microsoft 클라우드 간에 L3 연결 제공.
연결은 지점 간 또는 임의 네트워크에서 가능. 교환을 통한 가상 교차 연결도 가능

### 3. 기본 제공 중복

각 연결 공급자는 중복 디바이스를 사용하여 Microsoft와 설정된 고가용성 연결을 유지.

### 4. Microsoft 클라우드 서비스에 연결

- Microsoft Office 365
- Microsoft Dynamics 365
- Azure Virtual Machine
- Azure Cosmos DB / Azure Storage

### 5. ExpressRoute Global Reach를 사용한 온-프레미스 간 연결

ExpressRoute Global Reach를 사용해 ExpressRoute 회로를 연결하면 온-프레미스 사이트 전체에서 데이터를 교환 가능.
ex) 캘리포니아 프라이빗 데이터 센터 <-> ExpressRoute <-> 실리콘밸리, 다른 프라이빗 데이터 센터 <-> ExpressRoute <-> 댈러스
    = 캘리포니아 프라이빗 데이터 센터 <-> ExpressRoute Global Reach <->  다른 프라이빗 데이터 센터 

### 6. 동적 라우팅

BGP(Border Gateway Protocol) 라우팅 프로토콜 사용. Azure 실행 리소스와 온-프레미스 네트워크 간에 경로 교환에 사용.
이 프로토콜을 이용하여 동적 라우팅 가능

### 7. ExpressRoute 연결 모델

- CloudExchange 공동 배치
- 지점 간 이더넷 연결
- 임의 연결

### 8. 클라우드 교환의 공동 배치

일반적으로 공동 배치된 공급자는 공동 배치 시설에 있을 수 있는 인프라와 Microsoft 클라우드 간에 L2 및 L3 연결을 모두 제공

### 9. 지점 간 이더넷 연결

온-프레미스 사이트와 Azure 간에 L2, L3 연결 제공

### 10. 임의 네트워크

사무실과 데이터 센터에 연결을 제공. Azure와 WAN(광역 네트워크)를 통합.

### 11. 보안 고려 사항

데이터가 퍼블릭 인터넷을 통해 이동하지 않으므로 인터넷 통신과 관련된 잠재적인 위험에 노출되지 않음.

# 6. Azure Storage 서비스 살펴보기

## 1. Azure Storage Account 기본 사항

Azure Storage를 사용하려면 먼저 데이터 개체를 저장할 Azure Storage 계정 필요.
Azure Portal, PowerShell, Azure CLI 사용 생성 가능
Blob, 파일 및 디스크와 같은 모든 Azure Storage 데이터 개체가 포함

## 2. Disk Storage 기본 사항

Azure 가상 머신에 디스크 제공.
연결된 가상 하드 디스크에서 데이터 영구적으로 저장 및 액세스.
표준 SSD 및 HDD         < 프리미엄 SSD        < Ultra Disks
(중요도 낮은 워크로드)  (중요 업무 프로덕트)  (데이터 집약적 워크로드 ex. SAP HANA, 최상위 계층 데이터베이스)

## 3. Azure Blob Storage 기본 사항

클라우드용 개체 스토리지 솔루션.
방대한 양의 데이터(텍스트 또는 이진 데이터) 저장
비정형이므로 데이터의 종류에 제한 없음.
수천 개의 동시 업로드, 대용량 비디오 데이터, 지속적으로 증가하는 로그 파일 관리
인터넷 연결만 있으면 액세스 가능
Disk Storage와 다른 점 개발자가 디스크를 살피거나 관리할 필요 없음.
- 브라우저 이미지 또는 문서 제공
- 분산 액세스용 파일 저장
- 비디오 및 오디오 스트리밍
- 백업/복원, 재해 복구 및 보관용 데이터
- 온-프레미스 또는 Azure 호스팅 서비스에서 분석하기 위한 데이터
- 가상 머신에 대해 최대 8TB의 데이터 저장

## 4. Azure Files 기본 사항

클라우드에서 산업 표준 SMB(Server Message Block) 및 네트워크 파일 시스템(미리보기) 프로토콜을 통해 액세스할 수 있는 완전 관리형 파일 공유
Windows, Linux 및 macOS의 클라우드 또는 온-프레미스 배포를 통해 동시 탑재 가능
Azure VM이나 클라우드에서 실행되는 애플리케이션은 데스크톱 애플리케이션이 일반적인 SMB 공유를 탑재하은 것처럼 File Storage 공유를 탑재 파일 데이터 액세스
수에 상관없이 파일 스토리지 공유

- 여러 온-프레미스 애플리케이션 파일 공유
- 구성 파일을 파일 공유에 저장하고 여러 VM에서 액세스
- 데이터를 파일 공유에 쓰고 이 데이터를 나중에 처리하거나 분석

URL을 사용하여 전 세계 어디에서나 파일 액세스

## 5. Blob Access Layer

스토리지 수요에 대한 비용을 관리하기 위해, 액세스 빈도 및 계획된 보존 기간과 같은 특성을 기반으로 데이터를 구성 추천
클라우드 저장된 데이터는 전체 수명에 걸쳐 생성, 처리 및 액세스하는 방법에 따라 다름
Azure Storage는 Blob Storage에 대해 서로 다른 액세스 계층을 제공, 비용 효율적인 방식으로 개체 데이터 저장

- Hot Access Layer : 자주 액세스 데이터(웹 사이트 이미지) 저장
- Cool Access Layer : 자주 액세스하지 않고 30일 이상 저장하는 데이터(고객 송장)
- 보관 Access Layer : 거의 액세스하지 않고 180일 이상 보관하며 유연한 대기 시간 요구 데이터(장기 백업)

고려사항
- 핫 및 쿨 액세스 계층만 계정 수준에서 설정, 보관 액세스 계층은 계정 수준에서 사용 불가
- 핫, 쿨 보관 계층은 업로드 중 또는 후에 Blob 수준에서 설정 가능
- 쿨 액세스 계층은 데이터 가용성으 약간 낮아도 핫 데이터와 유사하게 여전히 내구성, 검색 대기 시간 및 처리량 특성이 높아야함. 쿨 데이터의 경우 핫 데이터와 비교 시 가용성 SLA가 약간 낮고 액세스 비용이 더 많이 들지만 스토리지 비용이 적어 균형이 맞음
- 보관 스토리지는 데이터를 오프라인으로 저장. 스토리지 비용이 가장 적지만, 액세스 비용이 가장 많이 듬

# 7. Azure Database 및 분석 서비스 살펴보기

## 1. Azure Cosmos DB 살펴보기

전 세계에 배포된 다중 모델 데이터베이스 서비스
전 세계 여러 Azure 지역의 처리량 및 스토리지를 탄력적이고 독립적으로 스케일링
많이 사용되는 여러 API 중 하나를 사용하여 한 자릿수 밀리초의 빠른 데이터 액세스 활용
처리량, 대기 시간, 가용성 및 일관성 보장을 위해 포괄적인 서비스 수준 약정

지속적으로 변경되는 데이터를 지원하기 위해 응답성이 뛰어난 "Always On" 애플리케이션을 빌드 할 수 있는 스키마 없는 데이터 지원
가장 낮은 수준에서 ARS(Atom-Record-Sequence) 형식으로 데이터를 저장, 데이터를 추상화하고 API로 프로젝션하여 데이터베이스를 작성할 때 이를 지정
SQL, MongoDB, Cassandra, Tables, Gremlin을 선택할 수 있음, 이 수준의 유연성은 회사의 데이터베이스를 Azure Cosmos DB로 마이그레이션할 때 개발자가 편안한 API를 계속 사용할 수 있음을 의미

## 2. Azure SQL Database 살표보기

Microsoft SQL Server 데이터베이스 엔진의 최신 안정화 버전을 기반으로 하는 관계형 데이터베이스
SQL Database는 안정적, 안전, 고성능을 제공하는 완전 관리형 데이터베이스, 인프라 관리 필요 없음

### 1. 기능

PaaS(Platform as a Service) 데이터베이스 엔진.
사용자 개입 없이 업그레이드, 패치, 백업 및 모니터링과 같은 대부분의 데이터베이스 관리 기능 처리
고가용성, 백업 및 다른 일반적인 유지 관리 작업이 포함된 완전 관리형 서비스
SQL 및 운영 체제 코드에 대한 모든 업데이트 처리, 기본 인프라 관리 필요 없음. 

그래프, JSON, 공간, XML과 같은 관계형 데이터와 비관계형 구조를 모두 처리

고성능 메모리 내 기술 및 지능형 쿼리 처리와 같은 고급 쿼리 처리 기능을 사용.

### 2. Migration

Azure Database Migration Service를 사용하여 최소한의 가동 중지 시간으로 기존의 SQL Server 데이터베이스 마이그레이션
Microsoft Data Migration Assistant는 마이그레이션 수행하기 전 필요한 변경사항 보고서 생성 후 필요한 부분 평가 및 처리 후 마이그레이션 시작

### 4. Azure Database for MySQL 살표보기

클라우드의 관계형 데이터베이스 서비스이며 MySQL Community Edition 데이터베이스 엔진 5.6, 5.7 및 8.0 버전을 기반으로 함
Microsoft 관리형 데이터 센터의 글로벌 네트워크에서 제공하는 99.99% 가용성 서비스 수준 약정 제공
Azure Database에서 특정 시점 복원을 사용하여 최대 35일 전의 상태로 복원

- 추가 비용 없이 기본 제공되는 고가용성
- 예측 가능한 성능 및 포괄적인 종량제 가격
- 필요에 따라 몇 초만에 스케일링
- 중요한 미사용 데이터 및 사용 데이터 보호
- 자동 백업
- 엔터프라이즈급 보안 및 규정 준수

### 5. Azure Database for PostgreSQL 살펴보기

클라우드의 관계형 데이터베이스 서비스

- 온-프레미스 리소스에 비해 높은 기본 고가용성. 가용성 유지를 위한 추가 구성, 복제 또는 비용 필요 없음
- 단순하고 유연한 가격 책정. 소프트웨어 패치, 자동 백업, 모니터링 및 보안이 포함된 가격 책정 계층 중 선택
- 스케일 업 또는 스케일 다운
- 조정 가능한 자동 백업 및 특정 시점 복원
- 엔터프라이즈급 보안 및 규정 준수

두가지 배포 옵션

- 단일 서버
  - 추가 비용 없이 기본 제공되는 고가용성(99.99% SLA)
  - 예측 가능한 성능 및 포괄적인 종량제 가격 책정
  - 필요에 따라 몇 초 만에 수직적 스케일링
  - 서버를 평가하기 위한 모니터링 및 경고
  - 엔터프라이즈급 보안 및 규정 준수
  - 중요한 미사용 데이터 및 사용 데이터 보호 기능
  - 최대 35일 동안 자동 백업 및 지정 시간 복원

- 하이퍼스케일(Citus)
  - 여러 머신에 걸쳐 쿼리를 수평으로 스케일링
  - 쿼리 엔진은 들어온 SQL 쿼리를 서버 간에 병렬 처리
  - 다중 테넌트 애플리케이션, 실시간 운영 분석 및 높은 처리량 트랜잭션 워크로드 지원

### 6. Azure SQL Managed Instance 살펴보기

완전 관리형 PaaS(Platform as a Service)의 모든 이점과 함께 가장 광범위한 SQL Server 데이터베이스 엔진 호환성 제공하는 확장성 있는 클라우드 데이터 서비스

- 기능
Azure SQL Database 및 Azure SQL Managed Instance는 많은 동일한 기능을 제공하지만 몇 가지 옵션 제공

- 마이그레이션
Azure DMS(Database Migration Service)나 네이티브 백업 및 복원을 사용하여 마이그레이션 가능

### 7. Big Data 및 분석 살펴보기

- Azure Synapse Analytics

엔터프라이즈 데이터 웨어하우징 및 빅 데이터 분석을 통합하는 무제한 분석 서비스
서버리스 리소스나 대규모로 프로비저닝된 리소스를 사용하여 원하는 대로 데이터를 쿼리

- Azure HDInisght

엔터프라이즈용 완전 관리형 오픈 소스 분석 서비스
많은 양의 데이터를 쉽고 빠르며 더욱 효율적인 비용으로 처리
많이 사용되는 오픈 소스 프레임워크를 실행
Apache Spark, Apache Hadoop, Apache Kafka, Apache HBase, Apache Storm 및 Machine Learning Service 와 같은 클러스터 유형 생성
ETL(추출, 변환 및 로드), 데이터 웨어하우징, 기계학습, IoT와 같은 광범위한 시나리오 지원

- Azure Databricks

모든 데이터에서 통찰력을 얻고 AI 솔루션을 빌드
Apache Spark 환경을 설정한 후 대화형 작업 영역에서 공유 프로젝트에 대한 자동 스케일링 및 협업 수행
Python, Scala, R, Java 및 SQL뿐 아니라 TensorFlow, PyTorch, scikit-learn등을 비롯한 데이터 과학 프레임워크와 라이브러리 지원

- Azure Data Lake Analytics

빅 데이터를 단순화하는 주문형 분석 서비스
데이터를 변형하고 귀중한 통찰력을 얻기 위한 쿼리 작성
실행 중인 작업에 대해서만 요금 부과

# 7. 애플리케이션에 가장 적합한 Azure IoT 서비스 선택

## 제품 옵션 확인

스마트 디바이스에는 데이터를 수집하는 센서가 장착되어 있음.

- 온도 및 습도 수준을 캡처하는 환경 센서
- 바코드, QR 코드 또는 OCR(광학 인식) 센서
- 지리적 위치 및 근접 센서
- 광원, 색, 적외선 센서
- 소리 및 초음파 센서
- 동작 및 터치 센서
- 가속도계 및 기울기 센서
- 연기, 가스, 알코올 센서
- 디바이스에 문제가 있는 경우 감지하는 오류 센서
- 변칙 또는 변형을 감지하는 기계적 센서
- 기체와 액체를 측정하는 유동, 레벨, 압력 센서

Azure IoT 서비스 사용 시 Azure의 특정 엔드포인트에 전송 가능, 메시지 데이터가 수집 및 집계되며, 
보고서 및 경고로 변환
Azure IoT  서비스에서 각 디바이스로 소프트웨어 업데이트를 전송하여 모든 디바이스를 새 펌웨어로 업데이트함으로써 문제 해결이나 기능 추가 가능

